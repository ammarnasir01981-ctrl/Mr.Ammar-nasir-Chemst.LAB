<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù†ØµØ© Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ø°ÙƒÙŠØ© | Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ù…Ø§Ø± Ù†Ø§ØµØ± Ø­Ø³ÙŠÙ†</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --primary: #002366; --secondary: #0056b3; --accent: #ffcc00;
  --bg: #f8f9fa; --white: #ffffff;
}
body { font-family: 'Cairo', sans-serif; background: var(--bg); margin: 0; }

#welcome-overlay {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  z-index:3000; display:flex; flex-direction:column; align-items:center; justify-content:center;
  color:white; text-align:center; transition:0.8s ease-in-out;
}

header { background: var(--primary); color:white; padding:20px; text-align:center; border-bottom:5px solid var(--accent); box-shadow:0 4px 10px rgba(0,0,0,0.1); }

.search-container { padding:30px; text-align:center; background: var(--white); }
.search-wrapper { position: relative; max-width:600px; margin:auto; }
.search-box { width:100%; padding:15px 50px 15px 25px; border-radius:35px; border:2px solid var(--secondary); font-size:1.1rem; outline:none; }
.search-icon { position:absolute; right:20px; top:50%; transform:translateY(-50%); color: var(--secondary); }

.chapters-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(130px,1fr)); gap:15px; padding:20px 5%; }
.ch-card { background:white; border-radius:15px; padding:20px; text-align:center; cursor:pointer; transition:0.3s; box-shadow:0 4px 6px rgba(0,0,0,0.05); border:1px solid #eee; }
.ch-card:hover { transform:translateY(-10px); background:var(--secondary); color:white; }
.ch-card i { font-size:2.5rem; margin-bottom:10px; color: var(--secondary); }
.ch-card:hover i { color: var(--accent); }

.display-area { display:none; padding:20px 5%; max-width:1000px; margin:auto; animation: fadeInUp 0.5s ease; }
.result-card { background:white; border-radius:20px; padding:30px; box-shadow:0 10px 40px rgba(0,0,0,0.1); border-right:10px solid var(--primary); }

.loading-shimmer { display:none; text-align:center; padding:50px; }
.pulse-loader { width:80px; height:80px; background:var(--secondary); border-radius:50%; margin:auto; animation:pulse 1.5s infinite; opacity:0.6; }

@keyframes pulse { 0%{transform:scale(0.8);opacity:0.8;}100%{transform:scale(1.2);opacity:0;} }
@keyframes fadeInUp { from{opacity:0; transform:translateY(30px);} to{opacity:1; transform:translateY(0);} }
</style>
</head>
<body>

<div id="welcome-overlay">
  <div style="font-size:5rem; margin-bottom:10px;">ğŸ§ª</div>
  <h1>Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ù…Ø§Ø± Ù†Ø§ØµØ± Ø­Ø³ÙŠÙ†</h1>
  <p>ÙŠØ±Ø­Ø¨ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…Ù†Ù‡Ø¬ÙŠ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ØªØµÙ„ Ø¨Ù€ Gemini AI</p>
  <button onclick="enterApp()" style="margin-top:20px; padding:12px 50px; border-radius:30px; border:none; background:var(--accent); color:var(--primary); font-weight:900;">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ</button>
</div>

<header>
  <strong>Ù…Ù†ØµØ© Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ù…Ù†Ù‡Ø¬ÙŠØ© | Ø§Ù„Ø£Ø³ØªØ§Ø° Ø¹Ù…Ø§Ø± Ù†Ø§ØµØ± Ø­Ø³ÙŠÙ†</strong>
</header>

<div class="search-container">
  <div class="search-wrapper">
    <i class="fas fa-search search-icon"></i>
    <input type="text" id="aiSearch" class="search-box" placeholder="Ø§Ø·Ù„Ø¨ Ø´Ø±Ø­ Ø£ÙŠ Ù…ÙˆØ¶ÙˆØ¹ Ø£Ùˆ Ø­Ù„ Ø³Ø¤Ø§Ù„ Ù…Ù† Ø§Ù„ÙƒØªØ§Ø¨...">
  </div>
  <div style="margin-top:15px">
    <button onclick="setMode('study')" style="padding:8px 20px;border-radius:20px;border:none;background:#0056b3;color:white;">ğŸ“˜ ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</button>
    <button onclick="setMode('exam')" style="padding:8px 20px;border-radius:20px;border:none;background:#b71c1c;color:white;">ğŸ“ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ÙˆØ²Ø§Ø±ÙŠ</button>
    <button onclick="processRequest('search')" style="padding:8px 20px;border-radius:20px;border:none;background:#002366;color:white;">Ø§Ø³Ø£Ù„ Ø¬ÙŠÙ…Ù†ÙŠ Ø§Ù„Ø°ÙƒÙŠ</button>
  </div>
</div>

<div class="chapters-grid" id="mainMenu">
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø±Ù…ÙˆØ¯Ø§ÙŠÙ†Ù…Ùƒ')"><i class="fas fa-fire"></i><br>Ø§Ù„ÙØµÙ„ 1</div>
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø§ØªØ²Ø§Ù† Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ')"><i class="fas fa-balance-scale"></i><br>Ø§Ù„ÙØµÙ„ 2</div>
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø§ØªØ²Ø§Ù† Ø§Ù„Ø£ÙŠÙˆÙ†ÙŠ')"><i class="fas fa-vial"></i><br>Ø§Ù„ÙØµÙ„ 3</div>
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©')"><i class="fas fa-bolt"></i><br>Ø§Ù„ÙØµÙ„ 4</div>
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„ØªÙ†Ø§Ø³Ù‚ÙŠØ©')"><i class="fas fa-atom"></i><br>Ø§Ù„ÙØµÙ„ 5</div>
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„ØªØ­Ù„ÙŠÙ„ÙŠØ©')"><i class="fas fa-microscope"></i><br>Ø§Ù„ÙØµÙ„ 6</div>
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø³Ø§Ø¨Ø¹ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©')"><i class="fas fa-flask"></i><br>Ø§Ù„ÙØµÙ„ 7</div>
  <div class="ch-card" onclick="processRequest('Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù…Ù† Ø§Ù„Ø­ÙŠØ§ØªÙŠØ©')"><i class="fas fa-leaf"></i><br>Ø§Ù„ÙØµÙ„ 8</div>
</div>

<div class="display-area" id="displayArea">
  <div class="loading-shimmer" id="loader">
    <div class="pulse-loader"></div>
    <p style="margin-top:20px; font-weight:bold; color:var(--secondary);">Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„...</p>
  </div>
  <div id="aiResponse"></div>
</div>

<script>
let MODE = "study";

function enterApp(){ document.getElementById('welcome-overlay').style.display='none'; }

function setMode(m){ MODE=m; alert(m==='exam'?"ğŸ“ ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„ÙˆØ²Ø§Ø±ÙŠ":"ğŸ“˜ ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©"); }

async function processRequest(type){
  const query = type==='search'?document.getElementById('aiSearch').value:type;
  if(!query) return;

  document.getElementById('mainMenu').style.display='none';
  document.getElementById('displayArea').style.display='block';
  document.getElementById('loader').style.display='block';
  document.getElementById('aiResponse').innerHTML='';

  try{
    const response = await fetch("http://localhost:3000/ask",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({question:query,mode:MODE})
    });
    const data = await response.json();
    renderResponse(data.answer);
  }catch{
    renderResponse("âŒ ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….");
  }

  document.getElementById('loader').style.display='none';
}

function renderResponse(text){
  document.getElementById('aiResponse').innerHTML=`
    <div class="result-card">
      <div style="color:#6a1b9a; border-bottom:2px solid #e1bee7; padding-bottom:10px; margin-bottom:20px; display:flex; align-items:center; gap:10px;">
        <i class="fas fa-robot"></i>
        <span>Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ©</span>
      </div>
      <div style="white-space:pre-line; line-height:1.9">${text}</div>
      <button onclick="location.reload()" style="margin-top:20px; border:none; background:var(--primary); color:white; padding:10px 25px; border-radius:20px; cursor:pointer;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
  `;
}
</script>

</body>
</html>

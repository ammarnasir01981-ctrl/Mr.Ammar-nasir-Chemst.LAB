<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø¯Ø§Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø¨Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <style>
        :root {
            --primary: #4285f4;
            --accent: #1a73e8;
            --background: #f8f9fa;
            --text: #202124;
            --card-bg: #ffffff;
            --border: #dadce0;
            --success: #34a853;
            --warning: #fbbc05;
            --error: #ea4335;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .subtitle {
            color: #5f6368;
            font-size: 1.1rem;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        
        .step {
            display: none;
        }
        
        .step.active {
            display: block;
        }
        
        .step-number {
            display: inline-block;
            background-color: var(--primary);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            margin-left: 10px;
            font-weight: bold;
        }
        
        .step-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--text);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--text);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
            margin-bottom: 5px;
        }
        
        textarea {
            min-height: 150px;
            resize: vertical;
            font-family: inherit;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }
        
        .button-container {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 25px;
        }
        
        button {
            padding: 12px 30px;
            border: none;
            border-radius: 12px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button.secondary {
            background: #f1f3f4;
            color: #5f6368;
            border: 1px solid var(--border);
        }
        
        button.secondary:hover {
            background: #e8eaed;
            color: var(--text);
        }
        
        .status-message {
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            font-weight: bold;
            display: none;
        }
        
        .status-message.success {
            background-color: #e6f4ea;
            border: 1px solid #81c995;
            color: #1e8e3e;
            display: block;
        }
        
        .status-message.error {
            background-color: #fce8e6;
            border: 1px solid #f28b82;
            color: #c5221f;
            display: block;
        }
        
        .status-message.info {
            background-color: #e8f0fe;
            border: 1px solid #aecbfa;
            color: #1a73e8;
            display: block;
        }
        
        .chat-container {
            display: none;
        }
        
        .chat-container.active {
            display: block;
        }
        
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #fafafa;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 12px;
            max-width: 80%;
        }
        
        .message.user {
            background-color: #e3f2fd;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }
        
        .message.assistant {
            background-color: #f1f3f4;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }
        
        .message.loading {
            background-color: #fef7e0;
            font-style: italic;
            color: #5f6368;
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        #chatInput {
            flex: 1;
            margin-bottom: 0;
        }
        
        .predefined-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .question-btn {
            padding: 8px 15px;
            background-color: #f1f3f4;
            border: 1px solid var(--border);
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        
        .question-btn:hover {
            background-color: #e8eaed;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: #5f6368;
            font-size: 0.9rem;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .step-indicator-item {
            display: flex;
            align-items: center;
            color: #5f6368;
            margin: 0 10px;
        }
        
        .step-indicator-item.active {
            color: var(--primary);
            font-weight: bold;
        }
        
        .step-indicator-item.completed {
            color: var(--success);
        }
        
        .step-indicator-item .circle {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: #f1f3f4;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
            font-size: 0.9rem;
        }
        
        .step-indicator-item.active .circle {
            background-color: var(--primary);
            color: white;
        }
        
        .step-indicator-item.completed .circle {
            background-color: var(--success);
            color: white;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .card {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .button-container {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .chat-input-container {
                flex-direction: column;
            }
        }
        
        .icon {
            font-size: 1.2rem;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§  Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø°ÙƒÙŠ</h1>
            <p class="subtitle">Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ÙÙˆØ±Ø§Ù‹ Ù…Ø¹ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</p>
        </header>
        
        <!-- Ù…Ø¤Ø´Ø± Ø§Ù„Ø®Ø·ÙˆØ§Øª -->
        <div class="step-indicator">
            <div class="step-indicator-item active" id="step1Indicator">
                <span class="circle">1</span>
                <span>Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙØªØ§Ø­</span>
            </div>
            <div class="step-indicator-item" id="step2Indicator">
                <span class="circle">2</span>
                <span>Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</span>
            </div>
        </div>
        
        <div class="card">
            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ -->
            <div class="step active" id="step1">
                <h2 class="step-title">
                    <span class="step-number">1</span>
                    Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Google AI Studio
                </h2>
                
                <div class="input-group">
                    <label for="apiKeyInput">
                        ğŸ”‘ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø°ÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ Ù…Ù† Google AI Studio:
                    </label>
                    <input type="text" id="apiKeyInput" class="search-box" placeholder="Ù…Ø«Ù„: AIzaSyBxxxxxxxxxxxxxxxxxxxxxxx">
                    <p style="font-size: 0.95rem; color: #5f6368; margin-top: 5px;">
                        ğŸ’¡ Ù„Ø§ ØªÙ‚Ù„Ù‚ØŒ Ø§Ù„Ù…ÙØªØ§Ø­ Ø³ÙŠØ®Ø²Ù† ÙÙŠ Ø¬Ù‡Ø§Ø²Ùƒ ÙÙ‚Ø· ÙˆÙ„Ù† ÙŠØ±Ø³Ù„ Ù„Ø£ÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±.
                    </p>
                </div>
                
                <div class="input-group">
                    <label>ğŸ¯ ÙƒÙŠÙ Ø£Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØªØ§Ø­ØŸ</label>
                    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 10px; border: 1px solid var(--border);">
                        <ol style="padding-right: 20px;">
                            <li style="margin-bottom: 8px;">Ø§ÙØªØ­ <a href="https://makersuite.google.com/app/apikey" target="_blank" style="color: var(--accent); font-weight: bold;">Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø·</a></li>
                            <li style="margin-bottom: 8px;">Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ Google</li>
                            <li style="margin-bottom: 8px;">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ <strong>Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙØªØ§Ø­ API</strong></li>
                            <li style="margin-bottom: 8px;">Ø§Ù†Ø³Ø® Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØ£Ù„ØµÙ‚Ù‡ ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ Ø£Ø¹Ù„Ø§Ù‡</li>
                        </ol>
                    </div>
                </div>
                
                <div class="button-container">
                    <button onclick="saveApiKey()">
                        <span class="icon">âœ…</span> Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØ§Ù„Ø¨Ø¯Ø¡
                    </button>
                    <button class="secondary" onclick="skipForNow()">
                        <span class="icon">â­ï¸</span> ØªØ®Ø·ÙŠ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ
                    </button>
                </div>
                
                <div id="step1Message" class="status-message"></div>
            </div>
            
            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© -->
            <div class="step" id="step2">
                <h2 class="step-title">
                    <span class="step-number">2</span>
                    Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ù…Ø¹ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ
                </h2>
                
                <div class="input-group">
                    <label>ğŸ“š Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©:</label>
                    <select id="studyType">
                        <option value="explain">Ø´Ø±Ø­ Ù…ÙÙ‡ÙˆÙ… Ø£Ùˆ ÙÙƒØ±Ø©</option>
                        <option value="summarize">ØªÙ„Ø®ÙŠØµ Ù†Øµ</option>
                        <option value="questions">Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ø®ØªØ¨Ø§Ø±Ø§Øª</option>
                        <option value="translate">ØªØ±Ø¬Ù…Ø© Ù…ØµØ·Ù„Ø­Ø§Øª</option>
                        <option value="custom">Ø³Ø¤Ø§Ù„ Ø®Ø§Øµ</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label id="promptLabel">ğŸ’¬ Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø´Ø±Ø­Ù‡Ø§:</label>
                    <textarea id="studyPrompt" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø±ÙŠØ¯ Ø´Ø±Ø­ Ù…ÙÙ‡ÙˆÙ… Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¶ÙˆØ¦ÙŠ ÙÙŠ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª..."></textarea>
                </div>
                
                <div class="button-container">
                    <button onclick="askGemini()">
                        <span class="icon">ğŸš€</span> Ø§Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ
                    </button>
                    <button class="secondary" onclick="goBackToStep1()">
                        <span class="icon">â†©ï¸</span> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙØªØ§Ø­
                    </button>
                </div>
                
                <div id="step2Message" class="status-message"></div>
            </div>
        </div>
        
        <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
        <div class="card chat-container" id="chatContainer">
            <h2 class="step-title">
                <span class="icon">ğŸ’¬</span>
                Ù…Ø­Ø§Ø¯Ø«ØªÙƒ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯
            </h2>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message assistant">
                    <strong>Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©:</strong> Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ·Ù„Ø¨ Ù…Ù†ÙŠ:
                    <ul style="margin-top: 10px; padding-right: 20px;">
                        <li>Ø´Ø±Ø­ Ø£ÙŠ Ù…ÙÙ‡ÙˆÙ… ØµØ¹Ø¨</li>
                        <li>ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø·ÙˆÙŠÙ„Ø©</li>
                        <li>Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø³Ø¦Ù„Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</li>
                        <li>ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</li>
                    </ul>
                </div>
            </div>
            
            <div class="chat-input-container">
                <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§...">
                <button onclick="sendChatMessage()">
                    <span class="icon">ğŸ“¤</span> Ø¥Ø±Ø³Ø§Ù„
                </button>
            </div>
            
            <div class="predefined-questions">
                <div class="question-btn" onclick="setQuestion('Ø§Ø´Ø±Ø­ Ù„ÙŠ Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ø¨Ø³Ø§Ø·Ø©')">Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ</div>
                <div class="question-btn" onclick="setQuestion('Ù„Ø®Øµ Ø¯Ø±Ø³ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©')">ØªÙ„Ø®ÙŠØµ Ø¯Ø±Ø³ ØªØ§Ø±ÙŠØ®</div>
                <div class="question-btn" onclick="setQuestion('Ø£Ù†Ø´Ø¦ 5 Ø£Ø³Ø¦Ù„Ø© Ø¹Ù† Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„Ù†Ø¨Ø§ØªÙŠØ©')">Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø³Ø¦Ù„Ø©</div>
                <div class="question-btn" onclick="setQuestion('Ù…Ø§ Ù…Ø¹Ù†Ù‰ photosynthesis Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŸ')">ØªØ±Ø¬Ù…Ø© Ù…ØµØ·Ù„Ø­Ø§Øª</div>
            </div>
            
            <div class="button-container" style="margin-top: 20px;">
                <button class="secondary" onclick="startNewConversation()">
                    <span class="icon">ğŸ”„</span> Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
                </button>
                <button class="secondary" onclick="copyConversation()">
                    <span class="icon">ğŸ“‹</span> Ù†Ø³Ø® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
                </button>
            </div>
        </div>
        
        <div class="footer">
            <p>ğŸ“ Ø£Ø¯Ø§Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø°ÙƒÙŠØ© - Ù…ØµÙ…Ù…Ø© Ø®ØµÙŠØµØ§Ù‹ Ù„Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø¨Ø§Ø­Ø«ÙŠÙ†</p>
            <p style="margin-top: 10px; font-size: 0.8rem;">ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ ÙˆÙ„Ø§ ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø£ÙŠ Ø®Ø§Ø¯Ù… Ø®Ø§Ø±Ø¬ÙŠ</p>
        </div>
    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        let apiKey = '';
        let currentStep = 1;
        
        // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('DOMContentLoaded', () => {
            // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…ÙØªØ§Ø­ Ù…Ø­ÙÙˆØ¸ Ù…Ø³Ø¨Ù‚Ø§Ù‹
            const savedKey = localStorage.getItem('geminiApiKey');
            if (savedKey) {
                apiKey = savedKey;
                document.getElementById('apiKeyInput').value = savedKey;
                showMessage('step1Message', `âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ù…Ø³Ø¨Ù‚Ø§Ù‹. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØ§Ù„Ø¨Ø¯Ø¡" Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.`, 'success');
            }
        });
        
        // Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­
        function saveApiKey() {
            const keyInput = document.getElementById('apiKeyInput');
            apiKey = keyInput.value.trim();
            
            if (!apiKey) {
                showMessage('step1Message', 'âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø´ÙƒÙ„ Ø§Ù„Ù…ÙØªØ§Ø­
            if (!apiKey.startsWith('AIza')) {
                showMessage('step1Message', 'âš ï¸ ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¨Ø¯Ø£ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¹Ø§Ø¯Ø© Ø¨Ù€ AIza', 'error');
                return;
            }
            
            // Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ ÙÙŠ localStorage
            localStorage.setItem('geminiApiKey', apiKey);
            
            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
            goToStep(2);
            showMessage('step2Message', 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©.', 'success');
        }
        
        // ØªØ®Ø·ÙŠ Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        function skipForNow() {
            apiKey = 'DEMO_MODE';
            showMessage('step1Message', 'âš ï¸ ÙˆØ¶Ø¹ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ: ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙˆÙ„ÙƒÙ† Ù„Ù† ØªØ¹Ù…Ù„ Ù…ÙŠØ²Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ¬Ø±Ø¨Ø© ÙƒØ§Ù…Ù„Ø©ØŒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­.', 'info');
            setTimeout(() => {
                goToStep(2);
            }, 2000);
        }
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø®Ø·ÙˆØ§Øª
        function goToStep(step) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.step-indicator-item').forEach(s => {
                s.classList.remove('active', 'completed');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            document.getElementById(`step${step}`).classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ø®Ø·ÙˆØ§Øª
            for (let i = 1; i <= step; i++) {
                const indicator = document.getElementById(`step${i}Indicator`);
                if (i === step) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.add('completed');
                }
            }
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¥Ø°Ø§ ÙƒÙ†Ø§ ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© 2
            if (step === 2) {
                document.getElementById('chatContainer').classList.add('active');
                currentStep = 2;
            } else {
                document.getElementById('chatContainer').classList.remove('active');
                currentStep = 1;
            }
        }
        
        // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙˆÙ„Ù‰
        function goBackToStep1() {
            goToStep(1);
        }
        
        // ØªØºÙŠÙŠØ± Ø§Ù„Ù†Øµ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©
        document.getElementById('studyType').addEventListener('change', function() {
            const labels = {
                'explain': 'ğŸ’¬ Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø´Ø±Ø­Ù‡Ø§:',
                'summarize': 'ğŸ“„ Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªÙ„Ø®ÙŠØµÙ‡:',
                'questions': 'â“ Ø§ÙƒØªØ¨ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø³Ø¦Ù„Ø© Ø¹Ù†Ù‡:',
                'translate': 'ğŸŒ Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø£Ùˆ Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ ØªØ±Ø¬Ù…ØªÙ‡Ø§:',
                'custom': 'ğŸ’­ Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø§Ù„Ø®Ø§Øµ:'
            };
            
            const placeholders = {
                'explain': 'Ù…Ø«Ø§Ù„: Ø£Ø±ÙŠØ¯ Ø´Ø±Ø­ Ù…ÙÙ‡ÙˆÙ… Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¶ÙˆØ¦ÙŠ ÙÙŠ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª...',
                'summarize': 'Ù…Ø«Ø§Ù„: Ù‡Ø°Ø§ Ø§Ù„Ù†Øµ Ø¹Ù† Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©...',
                'questions': 'Ù…Ø«Ø§Ù„: Ø£Ø±ÙŠØ¯ 5 Ø£Ø³Ø¦Ù„Ø© Ø¹Ù† Ø§Ù„Ø®Ù„ÙŠØ© Ø§Ù„Ø­ÙŠÙˆØ§Ù†ÙŠØ©...',
                'translate': 'Ù…Ø«Ø§Ù„: photosynthesis, mitochondria, ecosystem...',
                'custom': 'Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§...'
            };
            
            document.getElementById('promptLabel').textContent = labels[this.value];
            document.getElementById('studyPrompt').placeholder = placeholders[this.value];
        });
        
        // Ø³Ø¤Ø§Ù„ Gemini
        async function askGemini() {
            const prompt = document.getElementById('studyPrompt').value.trim();
            const studyType = document.getElementById('studyType').value;
            
            if (!prompt) {
                showMessage('step2Message', 'âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„ Ø£Ùˆ Ø·Ù„Ø¨', 'error');
                return;
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©
            addMessageToChat(prompt, 'user');
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„
            const loadingId = addMessageToChat('Ø¬Ø§Ø±Ù Ø§Ù„ØªÙÙƒÙŠØ±...', 'assistant', 'loading');
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ
            if (apiKey === 'DEMO_MODE') {
                setTimeout(() => {
                    removeMessage(loadingId);
                    const demoResponses = {
                        'explain': `Ù‡Ø°Ø§ Ø´Ø±Ø­ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ù…ÙˆØ¶ÙˆØ¹: "${prompt}". ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ØµØ­ÙŠØ­ØŒ Ø³Ø£Ù‚Ø¯Ù… Ù„Ùƒ Ø´Ø±Ø­Ø§Ù‹ Ù…ÙØµÙ„Ø§Ù‹ ÙˆØ´Ø§Ù…Ù„Ø§Ù‹ Ù…Ø¹ Ø£Ù…Ø«Ù„Ø© ÙˆØ±Ø³ÙˆÙ… ØªÙˆØ¶ÙŠØ­ÙŠØ©.`,
                        'summarize': `Ù‡Ø°Ø§ ØªÙ„Ø®ÙŠØµ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ù†Øµ. ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©ØŒ Ø³Ø£Ù„Ø®Øµ Ø§Ù„Ù†Øµ Ø¨Ø¯Ù‚Ø© Ù…Ø¹ Ø°ÙƒØ± Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ§Ù„ÙØ±Ø¹ÙŠØ©.`,
                        'questions': `Ø£Ø³Ø¦Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¹Ù† "${prompt}". ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©ØŒ Ø³Ø£Ù†Ø´Ø¦ Ù„Ùƒ Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ†ÙˆØ¹Ø© (ØµØ­/Ø®Ø·Ø£ØŒ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯ØŒ Ø´Ø±Ø­).`,
                        'translate': `ØªØ±Ø¬Ù…Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©. ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©ØŒ Ø³Ø£ØªØ±Ø¬Ù… Ø¨Ø¯Ù‚Ø© Ù…Ø¹ Ø´Ø±Ø­ Ø§Ù„Ù…Ø¹Ø§Ù†ÙŠ ÙˆØ°ÙƒØ± Ø£Ù…Ø«Ù„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù….`,
                        'custom': `Ø¥Ø¬Ø§Ø¨Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©. ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ØµØ­ÙŠØ­ØŒ Ø³Ø£Ø¬ÙŠØ¨ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ Ø¨Ø¯Ù‚Ø© Ù…Ø¹ ØªÙ‚Ø¯ÙŠÙ… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…ÙˆØ«ÙˆÙ‚Ø©.`
                    };
                    
                    addMessageToChat(demoResponses[studyType], 'assistant');
                    showMessage('step2Message', 'âš ï¸ Ù‡Ø°Ø§ Ø±Ø¯ ØªØ¬Ø±ÙŠØ¨ÙŠ. Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.', 'info');
                }, 1500);
                return;
            }
            
            try {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Gemini API
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: buildPrompt(prompt, studyType)
                                }]
                            }]
                        })
                    }
                );
                
                if (!response.ok) {
                    throw new Error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');
                }
                
                const data = await response.json();
                
                // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                removeMessage(loadingId);
                
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø¯ Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    const answer = data.candidates[0].content.parts[0].text;
                    addMessageToChat(answer, 'assistant');
                    showMessage('step2Message', 'âœ… ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                } else {
                    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©');
                }
                
            } catch (error) {
                removeMessage(loadingId);
                addMessageToChat(`âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ${error.message}. ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.`, 'assistant');
                showMessage('step2Message', 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…ÙØªØ§Ø­', 'error');
            }
        }
        
        // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ prompt Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©
        function buildPrompt(userPrompt, studyType) {
            const prompts = {
                'explain': `Ø§Ø´Ø±Ø­ Ù„ÙŠ "${userPrompt}" Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø³Ø·Ø© ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø·Ù„Ø§Ø¨ØŒ Ù…Ø¹ Ø£Ù…Ø«Ù„Ø© ÙˆØªØ´Ø¨ÙŠÙ‡Ø§Øª Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ÙÙ‡Ù….`,
                'summarize': `Ù„Ø®Øµ Ù„ÙŠ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ§Ù„ÙŠ ÙÙŠ Ù†Ù‚Ø§Ø· ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…Ø®ØªØµØ±Ø©: "${userPrompt}"`,
                'questions': `Ø£Ù†Ø´Ø¦ 5 Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ†ÙˆØ¹Ø© (ØµØ­/Ø®Ø·Ø£ØŒ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯ØŒ Ø´Ø±Ø­) Ø¹Ù† Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹: "${userPrompt}"ØŒ Ù…Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª.`,
                'translate': `ØªØ±Ø¬Ù… Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¹ Ø´Ø±Ø­ Ø¨Ø³ÙŠØ· Ù„ÙƒÙ„ Ù…ØµØ·Ù„Ø­: "${userPrompt}"`,
                'custom': userPrompt
            };
            
            return prompts[studyType] + ' Ø£Ø¬Ø¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„ÙØµØ­Ù‰.';
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            addMessageToChat(message, 'user');
            input.value = '';
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„
            const loadingId = addMessageToChat('Ø¬Ø§Ø±Ù Ø§Ù„ØªÙÙƒÙŠØ±...', 'assistant', 'loading');
            
            if (apiKey === 'DEMO_MODE') {
                setTimeout(() => {
                    removeMessage(loadingId);
                    addMessageToChat(`Ù‡Ø°Ø§ Ø±Ø¯ ØªØ¬Ø±ÙŠØ¨ÙŠ. ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ØµØ­ÙŠØ­ØŒ Ø³Ø£Ø¬ÙŠØ¨ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„Ùƒ "${message}" Ø¨Ø¯Ù‚Ø©.`, 'assistant');
                }, 1500);
                return;
            }
            
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`,
                    {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: message + ' Ø£Ø¬Ø¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.'
                                }]
                            }]
                        })
                    }
                );
                
                const data = await response.json();
                removeMessage(loadingId);
                
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    addMessageToChat(data.candidates[0].content.parts[0].text, 'assistant');
                } else {
                    addMessageToChat('âŒ Ù„Ù… Ø£Ø³ØªØ·Ø¹ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø©. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', 'assistant');
                }
                
            } catch (error) {
                removeMessage(loadingId);
                addMessageToChat('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØµØ­Ø© Ø§Ù„Ù…ÙØªØ§Ø­.', 'assistant');
            }
        }
        
        // ØªØ¹ÙŠÙŠÙ† Ø³Ø¤Ø§Ù„ Ù…Ø³Ø¨Ù‚
        function setQuestion(question) {
            document.getElementById('studyPrompt').value = question;
            document.getElementById('chatInput').value = question;
        }
        
        // Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function startNewConversation() {
            document.getElementById('chatMessages').innerHTML = `
                <div class="message assistant">
                    <strong>Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©:</strong> Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¯Ø±Ø§Ø³ØªÙƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ù† ØªØ·Ù„Ø¨ Ù…Ù†ÙŠ:
                    <ul style="margin-top: 10px; padding-right: 20px;">
                        <li>Ø´Ø±Ø­ Ø£ÙŠ Ù…ÙÙ‡ÙˆÙ… ØµØ¹Ø¨</li>
                        <li>ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø·ÙˆÙŠÙ„Ø©</li>
                        <li>Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø³Ø¦Ù„Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</li>
                        <li>ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</li>
                    </ul>
                </div>
            `;
        }
        
        // Ù†Ø³Ø® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        function copyConversation() {
            const messages = document.querySelectorAll('.message');
            let text = 'Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø°ÙƒÙŠØ©:\n\n';
            
            messages.forEach(msg => {
                const sender = msg.classList.contains('user') ? 'Ø£Ù†Øª' : 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯';
                text += `${sender}: ${msg.textContent}\n\n`;
            });
            
            navigator.clipboard.writeText(text).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©');
            });
        }
        
        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©
        function addMessageToChat(text, sender, className = '') {
            const chatMessages = document.getElementById('chatMessages');
            const messageId = 'msg_' + Date.now();
            
            const messageDiv = document.createElement('div');
            messageDiv.id = messageId;
            messageDiv.className = `message ${sender} ${className}`;
            messageDiv.innerHTML = `<strong>${sender === 'user' ? 'Ø£Ù†Øª' : 'Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©'}:</strong> ${text}`;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return messageId;
        }
        
        function removeMessage(id) {
            const element = document.getElementById(id);
            if (element) {
                element.remove();
            }
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function showMessage(elementId, text, type) {
            const element = document.getElementById(elementId);
            element.textContent = text;
            element.className = `status-message ${type}`;
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
            if (type !== 'info') {
                setTimeout(() => {
                    element.className = 'status-message';
                }, 5000);
            }
        }
    </script>
</body>
</html>
